/*
    Ditch and berm data are simply a list of 2D vertices that draw a polyline that make up the surface of the ditch.
    The vertices are placed into the points variable as x and y value blocks.
    
    Ground Parts (groundParts) are the shapes that fill in the blank areas that are solid and not part of the ditch cut.
    They are made up of arrays of point groups since some ditches may require multiple ground parts to fill in gaps.
    Note that ground parts are a CLOSED polygon.

    The ditch and berm names should match the ones defined in the ditchType
    global variable so they can be referenced directly between 2d and 3d view
    
    If copying/pasting coordinates from Inkscape by using the XY Exporter, add this to the copied data:
    "very long string".split("\n\n").join(" ")
    
*/

csecLib.showModuleInfo("sm.ditches3d.js", "3D Berms and Ditch definitions as polylines for the 3d view");	

// Convert a string of points into shape vertices for ditch data.  Mainly used for conversion from SVG to shapes
(function() {
let section3d = csecLib.section3d;
    
csecLib.section3d.pointStringToArray = function(str) {
    var strSplit = str.split(" ");
    var elems = [];
    strSplit.forEach( function(elem) {
        var e = elem.split(",");
        e[0] = Number(e[0]);
        e[1] = Number(e[1]);
        elems.push(e);
    });
    return elems;
}   

csecLib.section3d.curbData = {
        root : this.root,
        left : { 
        name : "left",
        points : csecLib.section3d.pointStringToArray("0.0,9.9495674 1.826356,9.7078106 3.5256889,8.7136899 4.3298019,7.9715142 5.0943038,7.0691916 5.8112717,6.0047521 6.4727835,4.7801657 6.7896754,4.0653395 7.1144895,3.2821546 7.4630706,2.48529 7.8433409,1.7216347 8.2790673,1.0419579 8.7781719,0.49313829 9.3683831,0.12596539 10.0,0.0"),
            groundParts : [
                csecLib.section3d.pointStringToArray("0.0,0.0 0.0,9.9495674 1.826356,9.7078106 3.5256889,8.7136899 4.3298019,7.9715142 5.0943038,7.0691916 5.8112717,6.0047521 6.4727835,4.7801657 6.7896754,4.0653395 7.1144895,3.2821546 7.4630706,2.48529 7.8433409,1.7216347 8.2790673,1.0419579 8.7781719,0.49313829 9.3683831,0.12596539 10.0,0.0"),
            ]
        },
    // NOTE:  The right curb is identical to the left curb, but .reverse() is added to the end
        right : { 
        name : "right",
        points : csecLib.section3d.pointStringToArray("0,0 0.577879,0.12596539 1.1680902,0.49313829 1.6671948,1.0419579 2.1029212,1.7216347 2.4831915,2.48529 2.8317726,3.2821546 3.1565867,4.0653395 3.4734786,4.7801657 4.1349904,6.0047521 4.8519583,7.0691916 5.6164602,7.9715142 6.4205732,8.7136899 8.1199061,9.7078106 10,10"),
            groundParts : [
                csecLib.section3d.pointStringToArray("0,0 0.577879,0.12596539 1.1680902,0.49313829 1.6671948,1.0419579 2.1029212,1.7216347 2.4831915,2.48529 2.8317726,3.2821546 3.1565867,4.0653395 3.4734786,4.7801657 4.1349904,6.0047521 4.8519583,7.0691916 5.6164602,7.9715142 6.4205732,8.7136899 8.1199061,9.7078106 9.9462621,9.9495674 10,0.0"),
            ]
        },     
};

csecLib.section3d.bermData = {
        U : { 
        name : "U",
        points : section3d.pointStringToArray("0,0 0.35536123,0.17945293 0.64637683,0.54663293 0.89247053,1.095463 1.1073143,1.775153 1.2948143,2.538823 1.4666893,3.335703 1.6268455,4.118903 1.7830955,4.833743 2.1092674,6.058353 2.462783,7.122813 2.8397362,8.025153 3.2362205,8.767343 4.0741112,9.761483 4.9491112,9.952883 5.8280174,9.786873 6.6854393,8.806403 7.0975486,8.066173 7.4901268,7.157963 7.8651268,6.079843 8.2147362,4.833743 8.3787986,4.126713 8.5409082,3.351323 8.7108302,2.554453 8.8983302,1.788823 9.1112202,1.103283 9.3553612,0.55054293 9.6444232,0.18140293 10,0"),
            groundParts : [
                section3d.pointStringToArray("0,0 0.35536123,0.17945293 0.64637683,0.54663293 0.89247053,1.095463 1.1073143,1.775153 1.2948143,2.538823 1.4666893,3.335703 1.6268455,4.118903 1.7830955,4.833743 2.1092674,6.058353 2.462783,7.122813 2.8397362,8.025153 3.2362205,8.767343 4.0741112,9.761483 4.9491112,9.952883 5.8280174,9.786873 6.6854393,8.806403 7.0975486,8.066173 7.4901268,7.157963 7.8651268,6.079843 8.2147362,4.833743 8.3787986,4.126713 8.5409082,3.351323 8.7108302,2.554453 8.8983302,1.788823 9.1112202,1.103283 9.3553612,0.55054293 9.6444232,0.18140293 10,0"),
            ]
        }, 
        Plateau : { 
        name : "Plateau",
        points : section3d.pointStringToArray("0,0 0.35732735,0.21033813 0.6481941,0.64541942 0.89416196,1.2957271 1.1088958,2.1010904 1.2962999,3.0059668 1.4680869,3.9501857 1.6281613,4.878205 1.7843314,5.7252249 2.1103364,7.1762673 2.4636712,8.4375401 2.8404314,9.5067293 3.0571174,9.9857815 6.8930446,9.9857815 7.0960657,9.5553288 7.488443,8.4791969 7.8632512,7.2017242 8.2126817,5.7252249 8.3766603,4.887462 8.5386867,3.9686998 8.7085216,3.0244809 8.8959257,2.1172901 9.1087075,1.3049842 9.3527232,0.65004794 9.6416378,0.2126524 10,0"),
            groundParts : [
                section3d.pointStringToArray("0,0 0.35732735,0.21033813 0.6481941,0.64541942 0.89416196,1.2957271 1.1088958,2.1010904 1.2962999,3.0059668 1.4680869,3.9501857 1.6281613,4.878205 1.7843314,5.7252249 2.1103364,7.1762673 2.4636712,8.4375401 2.8404314,9.5067293 3.0571174,9.9857815 6.8930446,9.9857815 7.0960657,9.5553288 7.488443,8.4791969 7.8632512,7.2017242 8.2126817,5.7252249 8.3766603,4.887462 8.5386867,3.9686998 8.7085216,3.0244809 8.8959257,2.1172901 9.1087075,1.3049842 9.3527232,0.65004794 9.6416378,0.2126524 10,0"),
            ]
        },
        Pointy : { 
        name : "Pointy",
        points : section3d.pointStringToArray("0.0,0.0 4.7676402,9.5276942 4.8251202,9.6272972 4.8836902,9.6988452 4.9430282,9.7421362 5.0028112,9.7569692 5.0627172,9.7431432 5.1224232,9.7004562 5.1816072,9.6287072 5.2399462,9.5276952 10.0,0.0"),
        groundParts : [
                section3d.pointStringToArray("0.0,0.0 4.7676402,9.5276942 4.8251202,9.6272972 4.8836902,9.6988452 4.9430282,9.7421362 5.0028112,9.7569692 5.0627172,9.7431432 5.1224232,9.7004562 5.1816072,9.6287072 5.2399462,9.5276952 10.0,0.0")
            ]
        },       
}

csecLib.section3d.ditchData = {
        U : { 
        name : "U",
        points : section3d.pointStringToArray("0.01747063,9.9572669 0.35536123,9.8205469 0.64637683,9.4533669 0.89247053,8.9045368 1.1073143,8.2248468 1.2948143,7.4611768 1.4666893,6.6642968 1.6268455,5.8810968 1.7830955,5.1662568 2.1092674,3.9416468 2.462783,2.8771868 2.8397362,1.9748468 3.2362205,1.2326568 4.0741112,0.23851682 4.9491112,0.04711682 5.8280174,0.21312682 6.6854393,1.1935968 7.0975486,1.9338268 7.4901268,2.8420368 7.8651268,3.9201568 8.2147362,5.1662568 8.3787986,5.8732868 8.5409082,6.6486768 8.7108302,7.4455468 8.8983302,8.2111768 9.1112202,8.8967168 9.3553612,9.4494569 9.6444232,9.8185969 9.9823142,9.9572669"),
        groundParts : [
                section3d.pointStringToArray("0,-0.05 0.01747063,9.9572669 0.35536123,9.8205469 0.64637683,9.4533669 0.89247053,8.9045368 1.1073143,8.2248468 1.2948143,7.4611768 1.4666893,6.6642968 1.6268455,5.8810968 1.7830955,5.1662568 2.1092674,3.9416468 2.462783,2.8771868 2.8397362,1.9748468 3.2362205,1.2326568 4.0741112,0.23851682 4.9491112,0.04711682 5.8280174,0.21312682 6.6854393,1.1935968 7.0975486,1.9338268 7.4901268,2.8420368 7.8651268,3.9201568 8.2147362,5.1662568 8.3787986,5.8732868 8.5409082,6.6486768 8.7108302,7.4455468 8.8983302,8.2111768 9.1112202,8.8967168 9.3553612,9.4494569 9.6444232,9.8185969 9.9823142,9.9572669 9.9823142,-0.05")
            ,
            [ 
                [1,0],   
                [2,0],
                [2,1],
                [1,0]
            ]            
        ]
    },    
    V : { 
        name : "V",
        points : [ 
        	[0,1],   
            [1,0],
            [2,1],
        ],
        groundParts : [
            [ 
                
                [0,0],   
                [0,1],
                [1,0],
                [0,0]
            ],
            [ 
                [1,0],   
                [2,0],
                [2,1],
                [1,0]
            ]            
        ]
    },
    Culvert : { 
        name : "Culvert",
        points : [ 
        	[0,1],   
            [1,0],
            [2,1],
        ],
        groundParts : [
            [ 
                
                [0,0],   
                [0,1],
                [1,0],
                [0,0]
            ],
            [ 
                [1,0],   
                [2,0],
                [2,1],
                [1,0]
            ]            
        ]
    },    
    Sharp : { 
        name : "Sharp",
        points : [ 
        	[0,3],   
            [1,3],
            [2,2],
            [3,0],
            [5,0],
            [6,2],
            [7,3],
            [8,3]
        ],
        groundParts : [
            [ 
                [0,0],
                [0,3],   
                [1,3],
                [2,2],
                [3,0],
                [0,0]
            ],
            [ 
                [5,0],
                [6,2],
                [7,3],
                [8,3],
                [8,0],
                [5,0]
            ]            
        ]
    },    
}

})();

